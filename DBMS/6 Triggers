Create a row level trigger for the customers table that would fire for INSERT or UPDATE
or DELETE operations performed on the CUSTOMERS table. This trigger will display the
salary difference between the old values and new values:
CUSTOMERS table:
ID NAME AGE ADDRESS SALARY
1 Alive 24 Khammam 2000
2 Bob 27 Kadappa 3000
3 Catri 25 Guntur 4000
4 Dena 28 Hyderabad 5000
5 Eeshwar 27 Kurnool 6000
6 Farooq 28 Nellur 7000
SQL> CREATE TABLE CUSTOMER (ID NUMBER (3),NAME VARCHAR2(20),
AGE NUMBER (3),
ADDRESS VARCHAR2 (20),
SALARY NUMBER (3)); 
OUTPUT:
Table created
/* CREATING A TRIGGER ON CUSTOMER TABLE*/
SET SERVEROUTPUT ON;
CREATE OR REPLACE TRIGGER DISPLAY_SALARY_CHANGES BEFORE DELETE OR
INSERT OR UPDATE ON CUSTOMER FOR EACH ROW
WHEN (NEW.ID > 0)
DECLARE
SAL_DIFF NUMBER;
BEGIN
SAL_DIFF := :NEW.SALARY - :OLD.SALARY;
DBMS_OUTPUT.PUT_LINE('OLD SALARY: ' || :OLD.SALARY);
DBMS_OUTPUT.PUT_LINE('NEW SALARY: ' || :NEW.SALARY);
DBMS_OUTPUT.PUT_LINE('SALARY DIFFERENCE: ' || SAL_DIFF);
END;
OUTPUT:
SQL> @61.sql
12 /
Trigger created.
SQL> update customer set salary=8000 where id=7;
OLD SALARY: 7500
NEW SALARY: 8000
SALARY DIFFERENCE: 500
1 row updated.
SQL> INSERT INTO CUSTOMER(ID,NAME,AGE,ADDRESS,SALARY) VALUES
(6,'Kriti',22,'HP',7500);
OLD SALARY:
NEW SALARY: 7500
SALARY DIFFERENCE:
1 row created.
4. Convert employee name into uppercase whenever an employee record is inserted or
updated. Trigger to fire before the insert or update
CREATE OR REPLACE TRIGGER employee_insert_update BEFORE INSERT OR UPDATE ON
EMP
FOR EACH ROW
DECLARE
dup_flag INTEGER;
BEGIN
--Force all employee names to uppercase.
:NEW.ENAME:= UPPER(:NEW.ENAME);
END;
OUTPUT:
SQL> @64.SQL
10 /
Trigger created.
BEFORE DML OPERATION ON EMP (BEFORE RAISE TRIGGER)
SQL> SELECT * FROM EMP;
EMPNO ENAME JOB MGR HIREDATE SAL COMM DEPTNO

----- ---------- --------- ----- --------- ----- ----- ------
7839 KING PRESIDENT 17-NOV-81 5000 10
7698 BLAKE MANAGER 7839 01-MAY-81 2850 30
7782 CLARK MANAGER 7839 09-JUN-81 2450 10
7566 JONES MANAGER 7839 02-APR-81 2975 20
7788 SCOTT ANALYST 7566 19-APR-87 3000 20
7902 FORD ANALYST 7566 03-DEC-81 3000 20
7369 SMITH CLERK 7902 17-DEC-80 800 20
7499 ALLEN SALESMAN 7698 20-FEB-81 500 300 30
7521 WARD SALESMAN 7698 22-FEB-81 1250 500 30
7654 MARTIN SALESMAN 7698 28-SEP-81 1250 1400 30
7844 TURNER SALESMAN 7698 08-SEP-81 1500 0 30
EMPNO ENAME JOB MGR HIREDATE SAL COMM DEPTNO
----- ---------- --------- ----- --------- ----- ----- ------
7900 JAMES CLERK 7698 03-DEC-81 950 30
7934 MILLER CLERK 7782 23-JAN-82 1300 10
13 rows selected.
SQL> INSERT INTO EMP(EMPNO,ENAME,SAL)VALUES(7455,'raju',4000);
1 row created.
SQL> INSERT INTO EMP(EMPNO,ENAME,SAL)VALUES(7452,'kumar raju',4000);
1 row created.
AFTER DML OPERATIONS ON EMP THEN RAISE TRIGGER
SQL> SELECT * FROM EMP;
EMPNO ENAME JOB MGR HIREDATE SAL COMM DEPTNO
----- ---------- --------- ----- --------- ----- ----- ------
7839 KING PRESIDENT 17-NOV-81 5000 10
7698 BLAKE MANAGER 7839 01-MAY-81 2850 30
7782 CLARK MANAGER 7839 09-JUN-81 2450 10
7566 JONES MANAGER 7839 02-APR-81 2975 20
7788 SCOTT ANALYST 7566 19-APR-87 3000 20
7902 FORD ANALYST 7566 03-DEC-81 3000 20
7369 SMITH CLERK 7902 17-DEC-80 800 20
7499 ALLEN SALESMAN 7698 20-FEB-81 500 300 30
7521 WARD SALESMAN 7698 22-FEB-81 1250 500 30

7654 MARTIN SALESMAN 7698 28-SEP-81 1250 1400 30
7844 TURNER SALESMAN 7698 08-SEP-81 1500 0 30
EMPNO ENAME JOB MGR HIREDATE SAL COMM DEPTNO
----- ---------- --------- ----- --------- ----- ----- ------
7900 JAMES CLERK 7698 03-DEC-81 950 30
7934 MILLER CLERK 7782 23-JAN-82 1300 10
7455 RAJU 4000
7452 KUMAR RAJU 4000
5. Trigger before deleting a record from emp table. Trigger will insert the row to be
deleted into table called delete_emp and also record user who has deleted the record
and date and time of delete.
SQL>CREATE TABLE EMPLOYEE_AUDIT(EMPNO INTEGER,
SAL NUMBER(3),DELETE_DATE DATE,DELETED_BY VARCHAR(20));
Table Created
/*TRIGGER */
CREATE OR REPLACE TRIGGER EMPLOYEE_BEFORE_DELETE
BEFORE DELETE ON EMP FOR EACH ROW
DECLARE
V_USERNAME VARCHAR2(10);
BEGIN
-- FIND USERNAME OF PERSON PERFORMING THE DELETE ON THE
TABLE
SELECT USER INTO V_USERNAME FROM DUAL;
-- INSERT RECORD INTO AUDIT TABLE
INSERT INTO EMPLOYEE_AUDIT (ID, SALARY, DELETE_DATE,DELETED_BY )
VALUES (:OLD.ID,:OLD.SALARY, SYSDATE, V_USERNAME );
END;
OUTPUT:

SQL> @65.SQL
12 /
Trigger created.
SQL> INSERT INTO EMP(EMPNO,ENAME)VALUES(7769,'CHIRU');
1 row created.
SQL> SELECT * FROM EMPLOYEE_AUDIT;
no rows selected
SQL> DELETE FROM EMP WHERE EMPNO=7769
2 ;
1 row deleted.
SQL> SELECT * FROM EMPLOYEE_AUDIT;
EMPNO SAL DELETE_DA DELETED_BY
----- ----- --------- --------------------
7769 21-JUL-22 SYSTEM
6. Create a trigger to maintain the audit report on each transaction performed on employee
table.
SQL>CREATE TABLE EMP_AUDIT(SDATE DATE,OP CHAR(5),UNAME1 VARCHAR(20));
Table created.
CREATE OR REPLACE TRIGGER EMAUDIT AFTER INSERT OR UPDATE OR DELETE ON
EMP
DECLARE
OP CHAR(5);
BEGIN
IF INSERTING THEN
OP:='INSERT';
ELSIF DELETING THEN
OP:='DELETE';
ELSIF UPDATING THEN
OP:='UPDATING';
END IF;
INSERT INTO EMP_AUDIT VALUES(SYSDATE,OP,USER);
END;
OUTPUT:
SQL> @66.SQL
15 /
Trigger created.
OUTPUT:
INSERT INTO EMP(EMPNO,ENAME)VALUES(1234,’RAJU’);
UPDATE EMP SET SAL=3000 WHERE EMPNO=7369
SELECT * FROM EMP_AUDIT